
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Looking for guidance on automating recipe selection and uploading in a Mitsubishi GT2507 HMI and FX5U PLC system? The customer now requires a method to select recipes from a list of 200 and upload them to the PLC for sequential execution. Unfortunately, the local Mitsubishi representative has indicated that">
    <meta name="keywords" content="mitsubishi gt2507 hmi, fx5u plc system, recipe selection automation, recipe uploading automation, sequential execution, mitsubishi plc recipes, hmi recipe management, plc recipe storage, recipe referencing method, recipe management system, mitsubishi recipe system">
    <meta name="author" content="oxmaint">
    
    <link rel="canonical" href="https://community.oxmaint.com/discussion-forum/how-to-automate-recipe-selection-and-upload-in-mitsubishi-gt2507-hmi-and-fx5u-plc-system">
    <title>How to Automate Recipe Selection and Upload in Mitsubishi GT2507 HMI and FX5U PLC System | Oxmaint Community</title>
    <link rel="shortcut icon" href="./../assets/img/favicon.png" />
    <link rel="stylesheet" href="./../assets/css/plugins.css" />
    <link rel="stylesheet" href="./../assets/css/style.css" />
    <link rel="stylesheet" href="./../assets/css/colors/purple.css" />
    
    <!-- og or twitter tags -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to Automate Recipe Selection and Upload in Mitsubishi GT2507 HMI and FX5U PLC System | Oxmaint Community">
    <meta property="og:description" content="Looking for guidance on automating recipe selection and uploading in a Mitsubishi GT2507 HMI and FX5U PLC system? The customer now requires a method to select recipes from a list of 200 and upload them to the PLC for sequential execution. Unfortunately, the local Mitsubishi representative has indicated that">
    <meta property="og:url" content="https://community.oxmaint.com/discussion-forum/how-to-automate-recipe-selection-and-upload-in-mitsubishi-gt2507-hmi-and-fx5u-plc-system">
    <meta property="og:site_name" content="Oxmaint">
    <meta property="og:image" content="https://community.oxmaint.com/assets/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to Automate Recipe Selection and Upload in Mitsubishi GT2507 HMI and FX5U PLC System | Oxmaint Community">
    <meta name="twitter:description" content="Looking for guidance on automating recipe selection and uploading in a Mitsubishi GT2507 HMI and FX5U PLC system? The customer now requires a method to select recipes from a list of 200 and upload them to the PLC for sequential execution. Unfortunately, the local Mitsubishi representative has indicated that">
    <meta name="twitter:image" content="https://community.oxmaint.com/assets/img/favicon.png">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y6M0T9NLP4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-Y6M0T9NLP4');
    </script>

    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://community.oxmaint.com/discussion-forum/how-to-automate-recipe-selection-and-upload-in-mitsubishi-gt2507-hmi-and-fx5u-plc-system"
      },
      "headline": "How to Automate Recipe Selection and Upload in Mitsubishi GT2507 HMI and FX5U PLC System",
      "description": "Looking for guidance on automating recipe selection and uploading in a Mitsubishi GT2507 HMI and FX5U PLC system? The customer now requires a method to select recipes from a list of 200 and upload them to the PLC for sequential execution. Unfortunately, the local Mitsubishi representative has indicated that",
      "author": {
        "@type": "Person",
        "name": "Godding666"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Oxmaint",
        "logo": {
          "@type": "ImageObject",
          "url": "https://community.oxmaint.com/assets/img/favicon.png"
        }
      },
      "datePublished": "2024-09-17",
      "image": "https://community.oxmaint.com/assets/img/favicon.png"
    }
    </script>

<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" defer></script>
<link rel="stylesheet" href="./../assets/css/home.css"/>
</head>
<body>
    <div class="content-wrapper bg-gray">
        <?php include "../include/header.php" ?>
        <!-- /header -->
        <div class="container my-5">
            

            <div class="bg-primary card p-4 mb-4">
                <h1 class="text-white">How to Automate Recipe Selection and Upload in Mitsubishi GT2507 HMI and FX5U PLC System</h1>
                <div class="d-flex justify-content-between">
                    <ul class="post-meta text-white fs-15 mb-4">
                        <li class="post-date"><i class="uil uil-calendar-alt"></i><span>17-09-2024</span></li>
                        <li class="post-author"><i class="uil uil-user"></i><span>Godding666</span></li>
                        <li class="post-comments"><i class="uil uil-comment-alt-dots"></i><span>16 comments</span></li>
                        <li class="post-seen"><i class="uil uil-eye"></i><span id="counter">567</span></li>
                        <li class="post-like"><i class="uil uil-thumbs-up" id="likeButton"></i><span id="likeCount">198</span></li>
                    </ul>
                </div>
                <div class="card p-4">
                    <h3>Question:</h3>
                    <p>Looking for guidance on automating recipe selection and uploading in a Mitsubishi GT2507 HMI and FX5U PLC system? The customer now requires a method to select recipes from a list of 200 and upload them to the PLC for sequential execution. Unfortunately, the local Mitsubishi representative has indicated that selecting and uploading recipes directly from the HMI to the PLC is no longer possible due to recent streamlining by Mitsubishi. It seems like the PLC will need to store the recipe system, but the method for referencing and managing recipes through the HMI remains unclear. Are there any resources available that provide examples or white papers on how a PLC can effectively store and manage recipes in this type of system?</p>
                </div>
            </div>

            <div class="row custom-row">
                <div class="col-lg-9 mx-auto mb-5">
                    <div>
                        <div class="p-4">
                            <h3 class="text-primary">Top Replies</h3>
                            
        <div class="bg-white p-3 rounded mb-3">
            <p>The FX5 may not be heavily utilized, but it does offer the option to configure file registers, also known as "R" registers. These file registers can be set to retain memory, provided there is enough memory available for all the recipes. This configuration is typically done in the parameter settings, which differs from the FX2/3 series. While the documentation may be lacking, it is possible to set the R area for latching, allowing for retentive memory storage. The ability to use R registers is essential for creating a simple program that reads and retrieves blocks of data, such as recipes. It is crucial to ensure that all recipes are of the same size and contain the same data structure when utilizing this method.

The process of storing and retrieving recipes can be complex, especially when using HMI systems like the GOT. However, by utilizing the PLC to store and retrieve recipes, such as with the Mitsubishi Badged Beijers E series, it is possible to streamline the process. In the case of the FX5, it may be feasible to select recipes on the HMI, download them, and save them onto the PLC. This approach can help reduce the number of recipes needed in the PLC, particularly when dealing with a large quantity of recipes.

To implement this process effectively, it is crucial to follow a step-by-step approach. By storing each recipe on the HMI and transferring it to the PLC using pointers and block transfers, it is possible to manage and access a significant number of recipes efficiently. By assigning a pointer to each recipe and incrementing it as new recipes are downloaded, the PLC can control the loading and running of recipes seamlessly.

If assistance is needed in setting up this system, providing details on the recipe structure, number of registers, and maximum number of registers per recipe can help in creating a tailored solution. With this information, a comprehensive plan can be developed to showcase the functionality and efficiency of this recipe storage and retrieval system.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>18-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>Thank you for your response, Parky. You are correct that the R registers can be set to latched through the CPU parameter window, but it seems to require a battery, which we currently do not have. I am wondering if "latched" and "retained" are synonymous. The software is not extensive, so we have D6000 to D8000 (and potentially more) available as retained registers for use. Storing recipes on the HMI could be advantageous, as it may allow customers to use spreadsheets to make adjustments in the future. However, if it simplifies management, it is not necessary for it to be handled through the PLC.

Recipe Structure:
There will always be 5 items in each recipe, including a unique name and 4 setpoints, all of which are "Floating Point". I envision a scenario where an operator can access a screen on the HMI to input a recipe number, retrieve the unique name and items of the recipe, make changes, and then store them back to the PLC. Subsequently, the PLC can refer to these recipes during the sequence execution by allowing the operator to choose which recipes to run through switches on the HMI. While there may be a more sophisticated approach to achieving this, I am striving to keep it straightforward in my mind.

I am puzzled about how the PLC can associate a specific set of setpoints with, for example, Recipe 6. Any guidance on this matter or suggestions regarding which PLC functions to utilize would be greatly valued.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>18-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>Godding666</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>I'm curious, does the table display correctly on your screen? It seems to be a bit off on mine.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>18-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>Godding666</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>Do not worry, I have some code written in R registers that can be implemented in any spare system. On the HMI, you must load the recipe into specific PLC registers, such as D200 to D229. A button on the recipe load screen will then set the value at D0 (the pointer to the first set of recipe registers) to 0. This pointer is multiplied by 30 using a one-shot rising edge function to address the 30 registers needed for the recipe. The data is then block moved from D200 to D229 to R0-R29 using indirect addressing with an array created for the first set of registers.

When the button is pressed again, the data from D200 to D229 is moved to R30-R59, and the pointer is incremented for the next recipe. The process repeats for up to 5 recipes, with a need to prevent additional recipe loads once the limit is reached. The multiplication factor for the pointer should be based on the number of recipe variables, with using 30 as a default for simplicity.

Furthermore, additional logic is required to manage the transition between recipes during operation and to prevent errors from the operator. It is essential to retrieve and load the recipes sequentially from the store with proper contingency measures in place. If further clarification is needed, feel free to ask for more detailed explanations.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>18-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>In this system, operators can store up to 5 recipes in the PLC for processing. The operator first loads the recipe to be used into the running recipe area, then selects a recipe from the queue using a button. The process continues by loading the next recipe and selecting another queue button. Once all recipes are in the queue area, the operator can start the system by pressing the start process button. The PLC then moves each recipe into the current recipe area for processing until all recipes in the queue have been completed. This system allows for flexibility in the number of recipes stored, with individual buttons for each queue recipe for easy management. The structure of recipes can be created using UDT's, making it an efficient and user-friendly process. Additionally, storing recipes in the PLC allows for easy access and selection of recipes for processing, eliminating the need for storing a large number of recipes directly in the PLC.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
                        </div>
                        <div class="p-4">
    <h3 class="text-primary">
        <a href="#" class="toggle-more-replies" style="text-decoration: underline; color: #1a73e8; cursor: pointer;">More Replies →</a>
    </h3>
    <div class="more-replies-content" style="display: none;">
                            
        <div class="bg-white p-3 rounded mb-3">
            <p>When utilizing the GOT2000 system, I access recipes from the PLC through the efficient Device Data Transfer Function. Here is an illustrative example:</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>goghie</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>The OP appears to have successfully implemented the recipe function, but the customer now wants a bank of recipes to be automatically utilized by the process. This involves the operator loading a specific set of recipe numbers, such as 1,5,3,6,50, which will be used in sequence. To achieve this, the operator must store these recipes in the PLC's recipe data area and select their position in an array. While automatic placement was considered, the risk of operator error necessitates a manual selection process. Therefore, the best approach is for the operator to choose a recipe, download it to the current recipe, select a stored recipe location, and then sequentially run through the stored queue during the process.

Although my experience with recipes in GOT is limited, it may not be feasible to automate this process entirely through PLC code. The operator will need to load each recipe individually, assign it to a storage area, and repeat this process until all necessary recipes are available for use. During operation, the PLC will retrieve recipes from the storage area in sequence and execute them accordingly.

In a previous, more complex system I worked on, there were 8 separate batching/cooking/cooling systems, each with its own PLC and extensive recipe registers. To manage this, the company utilized a centralized management system to create and distribute recipes to the PLCs via SCADA. Operators could select and run recipes locally on each PLC's HMI, with the ability to queue up a second recipe for seamless operation in case of SCADA failure. While this setup was more intricate, it ensured continuity of operations even without SCADA access.

In summary, the operator will need to manually load and assign recipes to the PLC for sequential execution during the process, with the option to queue up additional recipes for uninterrupted operation. This approach balances efficiency with practicality, considering the limitations of memory and the need for reliable operation.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>To access recipes from a PLC using the Device Data Transfer Function, follow these steps: 
1. Input the recipe number in the Record No. Device (e.g. D10). 
2. Activate Write Trigger 1 by setting it to TRUE (e.g. M10). 
3. Deactivate Write Trigger 1 once the writing process is complete (e.g. M10). 
4. Turn on the Device Data Transfer Function Trigger by setting it to TRUE (e.g. D400.0). 
5. Turn off the Device Data Transfer Function Trigger once the writing process is finished (e.g. D400.0). By incorporating these steps along with preparing recipes from GOT recipes, you can effectively manage data transfer functions in your PLC system.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>goghie</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>It's intriguing, but I'm unsure about how the recipe numbers or filenames are configured. It didn't display correctly, and I've never worked on recipes in the GOT software before. There are some important questions to consider. For instance, if the PLC can request a recipe, there may be challenges to overcome. If it's based on a numerical system, the operator must figure out how to select from a list of recipes to load. It's unclear how the operator will accomplish this, and editing the recipe number or name for each of the five required recipes seems like a hassle. Allowing the PLC to request them in sequence may not be much better, but I do find the concept appealing.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>Upon reviewing the recipe system in the GOT, I found it to be quite lackluster and not very user-friendly. The documentation is subpar, and while it includes signed/unsigned 16 & 32 bit integers, it does not mention support for floats. Compared to the older Mitsi badged Beijers E series, which has simpler recipe functionalities but feels a bit outdated, the GOT falls short. The lack of scripting options and poor library make it challenging to navigate, but with some practice, it becomes somewhat usable. The manuals, written in a mix of Japanese and poor English, further complicate the learning process.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>19-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>When it comes to functionality and manual support, I find GOT2000 to be superior to Beijer in almost every aspect. In particular, the scripting capabilities in C are incredibly powerful, but unfortunately, the documentation is lacking, especially for functions that are not readily available in official documents. My proficiency in scripting was largely gained from my experience with GOT1000, which has been invaluable for my work with GOT2000.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>20-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>goghie</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>The documentation for the recipe functions is lacking, which is disappointing. It would be more user-friendly to have a simple pull-down menu to select recipes. It was strange that the recipe selection keys were missing in the library before upgrading to GT3 version 1.357. Despite my efforts, I was unable to find a solution. It seems like a script could be developed to improve the system if time permits. Additionally, there were issues with the compatibility of the GXW3 simulator before the upgrade, indicating a potential installation problem with GT3.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>20-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>Hello, I want to express my gratitude for the valuable assistance and responses provided regarding this issue. I will be exploring this further today, as I am the only one in the office this week and will be handling everything on my own. While I have successfully implemented the recipe function using internal registers on the GOT, such as GD1000, I am facing challenges with understanding how the data transfer function, as demonstrated by Goghie, stores the 4 different setpoints in the GOT.

The 4 setpoints in the recipe are stored in GD1000 - GD1012, which I assume represents the first recipe on the list. But where are the setpoints for recipes 2, 3, and 4 stored? Is it a continuation in registers GD1014 - GD1026? I am struggling to grasp the structure of the recipe function in terms of saving and retrieving values when selected by the operator.

Based on Goghie's example, I believe I should be able to transfer these values using a data transfer function if they are stored as I assume in the GOT registers. However, I am unsure about how to digitally represent the operator's selection of the recipe from the PLC. I initially explored this path but was deterred by a local Mitsubishi representative who claimed it was not feasible.

I would greatly appreciate any suggestions or insights to help unravel this mystery. Thank you.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>21-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>Godding666</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>The recipes in GOT are stored in files on an SD card or USB drive. While they can be stored in the internal RAM, this is not recommended due to its limited capacity. Recipe files can be in binary or ASCII format, such as .txt or .csv. Additionally, recipes data can be input through GT Designer3. To select a recipe from the PLC, you will need to know its number rather than its name and follow a specific procedure outlined in post #9. While you can use internal GOT registers, you also have the option to use PLC registers to store recipes, though the preference is to use GD registers.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>22-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>goghie</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>When a recipe is loaded, it is copied into registers such as Dxxx. To simplify the process, you can create a list of recipe numbers, where the operator inputs 5 recipe numbers. The first recipe number is placed in the register in the PLC, triggering a read to load the data into the configured data memories. For example, upon transferring a recipe to the PLC, the information may be copied to registers D100-D150 (depending on recipe size). These registers store the current recipe data. Additionally, a set of D memories (D160-D164) is needed to store the recipe numbers. The operator inputs the recipe numbers in order into these locations. 

During process run in the PLC, the first recipe number is loaded and a read trigger is activated to select the recipe. Once the process cycle is completed, the PLC moves on to the next recipe number and triggers a read request for the next recipe selection. This process is repeated for the 5 stored recipe names. It is important to consider the customer's or your preferred method for implementing this process. While working with recipes on the GOT may seem unfamiliar, it showcases a unique Japanese approach to problem-solving.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>22-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>parky</span></li>
            </ul>
        </div>
        
        <div class="bg-white p-3 rounded mb-3">
            <p>I appreciate both of your assistance in this matter. Despite its simplicity, the process now successfully involves transferring setpoints from recipes saved in the GOT to the PLC, controlled by forced bits. Simply input the recipe number you wish to access into D10, toggle M0 On/Off, and then toggle M1 On/Off. While basic, the foundational concept is clear and I have grasped its potential functionality. (Please disregard the M50 issue, which arose due to communication difficulties and was used as a troubleshooting measure.) I now need to smoothly integrate this into my existing software. Once again, thank you for your support.</p>
            <ul class="post-meta mb-0">
                <li class="post-date"><i class="uil uil-calendar-alt"></i><span>22-09-2024</span></li>
                <li class="post-author"><i class="uil uil-user"></i><span>Godding666</span></li>
            </ul>
        </div>
        
                        </div>
                    <div class="no-replies-message" style="display: none; color: gray;">
        No More Replies.
    </div>
        
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 outer-container">
        <!-- Related Topics -->
    <?php include "./related-topic.php" ?>
    </div>
            </div>
             <!-- cta button -->
        <?php include "./cta.php" ?>

            <!-- FAQ Section -->
            <div class='my-5'><h3 class='faq-title text-primary mb-4'>Frequently Asked Questions (FAQ)</h3>
<div class='faq-item bg-light p-4 rounded shadow-sm mb-3'>
<h4 class='text-dark'>FAQ: 1. Can recipes be selected and uploaded directly from the Mitsubishi GT2507 HMI to the FX5U PLC in the system described?</h4>
<p class='text-muted'><strong>Answer:</strong> - No, the local Mitsubishi representative has indicated that this direct method is no longer possible due to recent streamlining by Mitsubishi.</p>
</div>
<div class='faq-item bg-light p-4 rounded shadow-sm mb-3'>
<h4 class='text-dark'>FAQ: 2. How many recipes does the customer need to select from in this system?</h4>
<p class='text-muted'><strong>Answer:</strong> - The customer needs to select recipes from a list of 200 for sequential execution.</p>
</div>
<div class='faq-item bg-light p-4 rounded shadow-sm mb-3'>
<h4 class='text-dark'>FAQ: 3. How can recipes be stored and managed effectively in the FX5U PLC?</h4>
<p class='text-muted'><strong>Answer:</strong> - The method for referencing and managing recipes through the HMI remains unclear, but resources like examples or white papers may provide guidance on how a PLC can store and manage recipes in this system.</p>
</div>
</div>
        </div>
        <?php include "./footer-banner.php" ?>

        <!-- /footer -->
        <?php include "../include/footer.php" ?>

        <script src="like-view-counter.js"></script>
    </div>
<script>
document.addEventListener("DOMContentLoaded", () => {
    function initializeToggleFunctionality() {
        const toggleLink = document.querySelector(".toggle-more-replies");
        const moreRepliesContent = document.querySelector(".more-replies-content");
        const noRepliesMessage = document.querySelector(".no-replies-message");

        if (!toggleLink || !moreRepliesContent || !noRepliesMessage) {
            console.error("Required elements not found. Ensure the correct class names are used.");
            console.log({
                toggleLink,
                moreRepliesContent,
                noRepliesMessage,
            });
            return;
        }

        const hasReplies = Array.from(moreRepliesContent.children).some(
            (child) => child.nodeType === Node.ELEMENT_NODE
        );

        if (hasReplies) {
            noRepliesMessage.style.display = "none";
        } else {
            noRepliesMessage.style.display = "block";
            toggleLink.style.display = "none";
            return;
        }

        toggleLink.addEventListener("click", (event) => {
            event.preventDefault();
            const isHidden = getComputedStyle(moreRepliesContent).display === "none";
            moreRepliesContent.style.display = isHidden ? "block" : "none";
            toggleLink.textContent = isHidden ? "Hide More Replies" : "More Replies →";
        });
    }

    initializeToggleFunctionality();

    const observer = new MutationObserver(() => {
        const toggleLink = document.querySelector(".toggle-more-replies");
        const moreRepliesContent = document.querySelector(".more-replies-content");

        if (toggleLink && moreRepliesContent) {
            initializeToggleFunctionality();
            observer.disconnect();
        }
    });

    observer.observe(document.body, { childList: true, subtree: true });
});
</script>
</body>
</html>
